riak_sysmon
===========

`riak_sysmon` is an Erlang/OTP application that manages the event
messages that can be generated by the Erlang virtual machine's
`system_monitor` BIF (Built-In Function).  These messages can notify a
central data-gathering process about the following events:

* Processes that have their private heaps grow beyond a certain size.
* Processes whose private heap garbage collection ops take too long
* Ports that are busy, e.g., blocking file & socket I/O
* Network distribution ports are busy, e.g., lots of communication
  with a slow peer Erlang node.

The problem with `system_monitor` events is that there isn't a
mechanism within the Erlang virtual machine that limits the rate at
which the events are generated.  A busy VM can easily create many
hundreds of these messages per second.  Some kind of rate-limiting
filter is required to avoid further overloading a system that may
already be overloaded.

This app will use two processes for `system_monitor` message handling.

1. A `gen_server` process to provide a rate-limiting filter.
1. A `gen_event` server to allow flexible, user-defined functions to
respond to `system_monitor` events that pass through the first stage
filter.

There can be only one system_monitor process
--------------------------------------------

(Silly reference to [The Highlander](http://www.imdb.com/title/tt0091203/)
omitted....)

The Erlang/OTP documentation is pretty clear on this point: only one
process can receive `system_monitor` messages.  But using the
`riak_sysmon` OTP app, if multiple parties are interested in receiving
`system_monitor` events, each party can add an event handler to the
`riak_sysmon_handler` event handler.

See the
[`gen_event` documentation for `add_up_event/3`](http://www.erlang.org/doc/man/gen_event.html#add_sup_handler-3)
for API details.  See the example event handler module in the source
repository for example usage.
